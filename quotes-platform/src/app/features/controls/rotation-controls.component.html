<div class="rotation-controls">
  <div class="control-container">
    <!-- Play/Pause and Next buttons -->
    <div class="button-group">
      <button 
        class="control-button play-pause"
        [attr.data-testid]="isPlaying ? 'pause-button' : 'play-button'"
        (click)="togglePlayPause()"
        [attr.aria-label]="getPlayPauseLabel()"
        [attr.aria-pressed]="isPlaying"
        [class.playing]="isPlaying">
        <svg class="button-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
          @if (isPlaying) {
            <rect x="6" y="4" width="4" height="16" fill="currentColor" rx="1"/>
            <rect x="14" y="4" width="4" height="16" fill="currentColor" rx="1"/>
          } @else {
            <path d="M8 5v14l11-7z" fill="currentColor"/>
          }
        </svg>
        <span class="button-text">{{ getPlayPauseLabel() }}</span>
      </button>

      <button 
        class="control-button next"
        data-testid="next-button"
        (click)="nextQuote()"
        aria-label="Câu kế tiếp">
        <svg class="button-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M5 4v16l8-8z M13 4v16l8-8z" fill="currentColor"/>
        </svg>
        <span class="button-text">Kế tiếp</span>
      </button>

      <button 
        class="control-button audio-toggle"
        data-testid="audio-toggle-button"
        (click)="toggleAudio()"
        [attr.aria-label]="isAudioEnabled ? 'Tắt âm thanh' : 'Bật âm thanh'"
        [attr.aria-pressed]="isAudioEnabled"
        [class.enabled]="isAudioEnabled">
        <svg class="button-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
          @if (isAudioEnabled) {
            <!-- Speaker with sound waves -->
            <path d="M3 9v6h4l5 5V4L7 9H3z" fill="currentColor"/>
            <path d="M14 8.5c1.5 1 2 2.5 2 3.5s-.5 2.5-2 3.5M16 6c2 1.5 3 3.5 3 6s-1 4.5-3 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          } @else {
            <!-- Speaker muted -->
            <path d="M3 9v6h4l5 5V4L7 9H3z" fill="currentColor"/>
            <path d="M16 9l6 6M22 9l-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          }
        </svg>
        <span class="button-text">{{ isAudioEnabled ? 'Âm thanh' : 'Tắt tiếng' }}</span>
      </button>
    </div>

    <!-- Timer selector -->
    <div class="timer-group">
      <label for="timer-select" class="timer-label">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2"/>
          <path d="M10 6v4l3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span>Thời gian:</span>
      </label>
      <select 
        id="timer-select"
        class="timer-select"
        data-testid="timer-dropdown"
        [value]="timer().interval"
        (change)="onTimerChange($event)"
        aria-label="Chọn khoảng thời gian">
        <option [value]="5" [selected]="timer().interval === 5">5 giây</option>
        <option [value]="10" [selected]="timer().interval === 10">10 giây</option>
        <option [value]="15" [selected]="timer().interval === 15">15 giây</option>
        <option [value]="20" [selected]="timer().interval === 20">20 giây</option>
        <option [value]="25" [selected]="timer().interval === 25">25 giây</option>
        <option [value]="30" [selected]="timer().interval === 30">30 giây</option>
        <option [value]="35" [selected]="timer().interval === 35">35 giây</option>
        <option [value]="40" [selected]="timer().interval === 40">40 giây</option>
        <option [value]="45" [selected]="timer().interval === 45">45 giây</option>
        <option [value]="50" [selected]="timer().interval === 50">50 giây</option>
        <option [value]="55" [selected]="timer().interval === 55">55 giây</option>
        <option [value]="60" [selected]="timer().interval === 60">60 giây (1 phút)</option>
      </select>
    </div>
  </div>
</div>
